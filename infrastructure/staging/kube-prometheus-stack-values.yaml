---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kube-prometheus-stack
  namespace: infrastructure
spec:
  chart:
    spec:
      version: ">=43.2.1"
  values:
    kubeEtcd:
      enabled: false
    kubeControllerManager:
      enabled: false
    kubeScheduler:
      enabled: false
    kubeProxy:
      enabled: false
    alertmanager:
      serviceMonitor:
        selfMonitor: false
    grafana:
      podLabels:
        app: grafana
      service:
        labels:
          app: grafana
